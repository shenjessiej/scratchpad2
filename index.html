<!DOCTYPE html>
<html lang="en">
<head>
<title>scratchpad 2: electric boogaloo</title>
<style type="text/css" media="screen">
    #editor { 
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        width: 50%;
        z-index: 4;
    }

    #preview {
        position: absolute;
        left: 51%;
        width: 49%;
        height: 100%;
        top: 0;
        z-index: 0;
        bottom: 0;
        right: 0;

    }
</style>
</head>
<body>
    <iframe id="preview">preview goes here</iframe>

<div id="editor-wrap">
<div id="editor">
    function foo(items) {
    var x = "All this is syntax highlighted";
    return x;
}</div>
<div id="editor-dragbar"></div>
</div>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script src="scratchpad.js" type="text/javascript" charset="utf-8"></script>

<script src="src/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<style>
    #editor-dragbar {
    background-color: #222222;
    position: absolute;
    left: 50%;
	width: 2px;
	height: 100%;
	cursor: col-resize;
	opacity: 1;

    }
</style>
<script>
var dragging = false;
var wpoffset = 0;
$( '#editor-dragbar' ).mousedown( function ( e ) {
	e.preventDefault();
	window.dragging = true;

	var editor = $( '#editor' );
	var right_offset = editor.offset().right + wpoffset;

	// Set editor opacity to 0 to make transparent so our wrapper div shows
	editor.css( 'opacity', 0 );

	// handle mouse movement
	$( document ).mousemove( function ( e ) {

		var actualX = e.pageX + wpoffset;
		// editor width
        var ewidth = actualX + right_offset;
        
        var prevwidth = $(window).width() - e.pageX;
		
		// Set wrapper width
		$( '#editor' ).css( 'width', e.pageX);
        $( '#preview' ).css( 'width', prevwidth);
        $( '#preview' ).css( 'left', e.pageX);


		// Set dragbar opacity while dragging (set to 0 to not show)
        $( '#editor-dragbar' ).css( 'opacity', 0.15 ).css('left', e.pageX);
        
		
	} );

} );

$( '#editor-dragbar' ).mouseup( function ( e ) {

if ( window.dragging )
{
    var editor = $( '#editor' );

    var actualX = e.pageX + wpoffset;
    var right_offset = editor.offset().right + wpoffset;
    var ewidth = actualX + right_offset;

    $( document ).unbind( 'mousemove' );
    
    // Set dragbar opacity back to 1
    $( '#editor-dragbar' ).css( 'opacity', 1 );
    
    // Set height on actual editor element, and opacity back to 1
    editor.css( 'width', e.pageX ).css( 'opacity', 1 );
    $( '#preview' ).css( 'width', prevwidth);
    $( '#preview' ).css( 'left', e.pageX);

    // Trigger ace editor resize()
    editor.resize();
    window.dragging = false;
}

} );				  
</script>

<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/tomorrow_night_eighties");
  editor.setHighlightActiveLine(false);
  editor.getSession().setTabSize(2);
  document.getElementById('editor').style.fontSize='11px';
  editor.commands.removeCommand('gotoline');
  editor.setShowPrintMargin(false);
  editor.getSession().setMode("ace/mode/html");
  editor.commands.addCommand({
    name: 'showHelp',
    bindKey: {win: 'Ctrl-/',  mac: 'Command-/'},
    exec: function(editor) {
        $('#help').toggleClass('visible');
    }
  });
  editor.commands.addCommand({
    name: 'toggleFullscreen',
    bindKey: {win: 'Ctrl-i',  mac: 'Command-i'},
    exec: function(editor) {
        toggleFullscreen();
    }
  });
</script>


</body>
</html>